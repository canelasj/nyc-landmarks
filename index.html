<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NYC Tour Guide Exam — Landmark Study</title>
  <style>
    :root{
      --bg:#070b14; --card:#0e1630; --line:#223055; --text:#eaf0ff; --muted:#9bb0da; --accent:#00d4ff;
      --chip:#0a1020; --ok:#2cffb3; --warn:#ffd166;
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(180deg,#050812,var(--bg));
      color:var(--text);
    }
    .wrap{max-width:820px;margin:0 auto;padding:14px 12px 100px}
    header{display:flex;gap:10px;align-items:flex-start;justify-content:space-between;margin-bottom:10px}
    h1{margin:0;font-size:18px;letter-spacing:.2px}
    .sub{margin:4px 0 0;color:var(--muted);font-size:12px;line-height:1.35}
    .pill{
      display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);
      background:rgba(7,16,34,.7);padding:8px 10px;border-radius:999px;color:var(--muted);font-size:12px;
      white-space:nowrap;
    }
    .grid{display:grid;grid-template-columns:1fr;gap:12px}
    @media (min-width:860px){ .grid{grid-template-columns:330px 1fr} }
    .card{
      background:rgba(14,22,48,.95);border:1px solid var(--line);border-radius:18px;padding:12px;
      box-shadow:0 12px 30px rgba(0,0,0,.35);
    }
    label{display:block;font-size:12px;color:var(--muted);margin:10px 2px 6px}
    input, select{
      width:100%;padding:12px 12px;border-radius:14px;border:1px solid var(--line);
      background:#071022;color:var(--text);outline:none;font-size:15px;
    }
    input:focus, select:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,212,255,.12)}
    .actions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    button{
      cursor:pointer;border:1px solid var(--line);background:#071022;color:var(--text);
      padding:10px 12px;border-radius:14px;font-weight:700;font-size:13px;
    }
    button.primary{border-color:rgba(0,212,255,.55);background:rgba(0,212,255,.10)}
    button.alt{border-color:rgba(255,209,102,.55);background:rgba(255,209,102,.08)}
    .list{display:grid;gap:8px;margin-top:10px}
    .lmBtn{
      width:100%;text-align:left;border-radius:16px;padding:12px;border:1px solid var(--line);
      background:rgba(7,16,34,.55);color:var(--text);
      display:flex;gap:10px;justify-content:space-between;align-items:flex-start;
    }
    .lmBtn:hover{filter:brightness(1.08)}
    .lmTitle{margin:0;font-size:14px;line-height:1.2}
    .lmMeta{margin-top:4px;color:var(--muted);font-size:12px;line-height:1.35}
    .badge{font-size:11px;color:var(--muted);border:1px solid var(--line);padding:5px 8px;border-radius:999px;background:rgba(10,16,32,.75)}
    .empty{
      padding:14px;text-align:center;color:var(--muted);border:1px dashed var(--line);border-radius:14px;
    }

    /* Detail */
    .detailTitle{margin:0 0 4px;font-size:18px}
    .detailMeta{color:var(--muted);font-size:12px;line-height:1.4}
    .chips{display:flex;gap:6px;flex-wrap:wrap;margin-top:10px}
    .chip{
      border:1px solid var(--line);background:var(--chip);padding:7px 10px;border-radius:999px;
      font-size:12px;color:var(--muted);text-decoration:none;display:inline-flex;gap:6px;align-items:center;
    }
    .chip strong{color:var(--text)}
    .sectionTitle{margin:14px 0 8px;font-size:13px;color:var(--muted);letter-spacing:.2px;text-transform:uppercase}
    .facts{
      border:1px solid var(--line);border-radius:16px;padding:12px;background:rgba(7,16,34,.55)
    }
    .facts ul{margin:8px 0 0;padding-left:18px}
    .facts li{margin:6px 0;color:#dbe6ff;font-size:13px;line-height:1.45}
    .qCard{
      border:1px solid var(--line);border-radius:16px;padding:12px;background:rgba(7,16,34,.55);
      display:grid;gap:10px;
    }
    .qRow{display:grid;gap:8px}
    .qPrompt{font-size:13px;line-height:1.45;color:#dbe6ff}
    .answer{
      display:none;border:1px solid rgba(44,255,179,.25);background:rgba(44,255,179,.07);
      border-radius:14px;padding:10px;color:#d7fff1;font-size:13px;line-height:1.45;
    }
    .muted{color:var(--muted)}
    .stickyBar{
      position:fixed;left:0;right:0;bottom:0;background:rgba(7,11,20,.88);border-top:1px solid var(--line);
      backdrop-filter: blur(8px);padding:10px 12px;
    }
    .stickyInner{max-width:820px;margin:0 auto;display:flex;gap:10px;justify-content:space-between;align-items:center}
    .small{font-size:12px;color:var(--muted)}
    .k{color:var(--accent)}
  </style>
</head>
<body>
<div class="wrap">
  <header>
    <div>
      <h1>NYC Tour Guide Exam — Landmark Study</h1>
      <p class="sub">
        Tap a landmark → study quick facts → drill exam-style questions.
        Use <span class="k">Quiz Mode</span> for random questions.
      </p>
    </div>
    <span class="pill" id="countPill">0 landmarks</span>
  </header>

  <div class="grid">
    <!-- LEFT: Landmark navigator -->
    <div class="card">
      <label for="q">Search (landmark / address / neighborhood / keyword)</label>
      <input id="q" placeholder="Try: grand central, wall st, chelsea, 42nd..." />

      <label for="group">Area Group</label>
      <select id="group">
        <option value="">All</option>
        <option value="Midtown">Midtown</option>
        <option value="Downtown">Downtown</option>
      </select>

      <label for="hood">Neighborhood</label>
      <select id="hood">
        <option value="">All</option>
      </select>

      <div class="actions">
        <button class="primary" id="quizBtn">Quiz Mode</button>
        <button id="clearBtn">Clear</button>
      </div>

      <div class="sectionTitle">Landmarks</div>
      <div class="list" id="lmList"></div>
    </div>

    <!-- RIGHT: Detail / Quiz -->
    <div class="card" id="rightPane">
      <div class="empty">
        Select a landmark on the left to view study facts and exam questions.
      </div>
    </div>
  </div>
</div>

<div class="stickyBar">
  <div class="stickyInner">
    <div class="small" id="status">Tip: Add this page to your phone Home Screen for quick access.</div>
    <div class="small">Search + Tap + Recall + Reveal</div>
  </div>
</div>

<script>
/**
 * ✅ YOU EDIT HERE:
 * Add landmarks + questions.
 * - Each landmark has its own 3 landmark-specific questions (LM Questions)
 * - PLUS each landmark automatically shows 3 common exam questions (Common Exam)
 *   (So you don’t have to copy/paste the same exam questions into every landmark.)
 */

const AREA_GROUPS = {
  "Midtown": ["East Midtown", "Midtown", "Chelsea"],
  "Downtown": ["East Village", "Financial District", "Tribeca"]
};

/**
 * ✅ COMMON EXAM QUESTIONS (3 examples)
 * These are shown for EVERY landmark automatically.
 * You can expand this list later (add more objects).
 */
const COMMON_EXAM_QA = [
  {
    q: "Common Exam: What borough is this landmark located in?",
    a: "Manhattan."
  },
  {
    q: "Common Exam: Would this landmark typically be viewed from the exterior, interior, or both on a standard walking tour?",
    a: "Often exterior; interior visits depend on time, access, ticketing, and group interest."
  },
  {
    q: "Common Exam: What is one safety or crowd-control responsibility of a licensed NYC tour guide at this location?",
    a: "To keep the group together, avoid blocking sidewalks or entrances, and follow posted rules or security instructions."
  },
  {
    q: "Common Exam: If a guest becomes separated from the group, what is the guide’s best immediate action?",
    a: "Pause the group in a safe location, attempt contact, and follow established group-recovery procedures."
  },
  {
    q: "Common Exam: Why is it important for a tour guide to know nearby streets or landmarks?",
    a: "Because guests often ask for directions, meeting points, and nearby attractions during the tour."
  },
  {
    q: "Common Exam: Can a tour guide legally provide historical and factual information about this landmark?",
    a: "Yes, licensed NYC tour guides are authorized to provide historical and factual information about city landmarks."
  },
  {
    q: "Common Exam: What should a guide do if a guest asks a question the guide does not know the answer to?",
    a: "Acknowledge the question honestly and provide accurate information later rather than guessing."
  },
  {
    q: "Common Exam: Why should a guide avoid blocking entrances, exits, or sidewalks while speaking?",
    a: "Because it can create safety hazards, violate city regulations, and disrupt pedestrian flow."
  },
  {
    q: "Common Exam: What type of information do tourists most commonly ask about landmarks?",
    a: "Historical significance, purpose, dates, nearby attractions, and photo opportunities."
  },
  {
    q: "Common Exam: Why is time management important during a walking tour?",
    a: "Because tours must stay on schedule, respect guest expectations, and avoid fatigue or overcrowding."
  },
{
  q: "Common Exam: What should a tour guide do before beginning a walking tour?",
  a: "Introduce themselves, explain the route and duration, set expectations, and establish a meeting point policy."
},
{
  q: "Common Exam: Why is it important for a guide to monitor the pace of the group?",
  a: "To ensure the group stays together, avoids fatigue, and accommodates guests of varying mobility levels."
},
{
  q: "Common Exam: What is an appropriate response if a guest challenges a historical fact during the tour?",
  a: "Respond professionally, clarify facts when possible, and avoid confrontation or speculation."
},
{
  q: "Common Exam: What should a guide do if a location becomes unexpectedly inaccessible?",
  a: "Safely reroute the group, provide alternative commentary, and continue the tour smoothly."
},
{
  q: "Common Exam: Why should a guide be aware of restroom locations along the route?",
  a: "Because guests frequently ask, and knowing locations improves comfort and tour flow."
},
{
  q: "Common Exam: What is one reason guides should avoid using amplified sound in certain areas?",
  a: "Because of noise regulations, residential concerns, and potential permit restrictions."
},
{
  q: "Common Exam: What is the guide’s responsibility regarding local laws and regulations?",
  a: "To follow city rules, respect property restrictions, and ensure the group does the same."
},
{
  q: "Common Exam: How should a guide handle disruptive behavior from a guest?",
  a: "Address it calmly and respectfully, prioritizing group safety and overall tour experience."
},
{
  q: "Common Exam: Why is flexibility important when leading a walking tour?",
  a: "Because weather, crowds, and guest needs can change unexpectedly."
},
{
  q: "Common Exam: What is one professional reason a guide should avoid personal opinions on sensitive topics?",
  a: "To maintain neutrality, professionalism, and a welcoming environment for all guests."
},
{
  q: "Common Exam: What information should a tour guide always confirm before starting a tour?",
  a: "The tour route, duration, meeting point, and any special considerations such as weather or accessibility."
},
{
  q: "Common Exam: Why is it important for a guide to face the group while speaking?",
  a: "So guests can hear clearly, stay engaged, and remain aware of their surroundings."
},
{
  q: "Common Exam: What should a guide do if a guest asks for a recommendation outside the tour scope?",
  a: "Offer general guidance when appropriate and avoid guarantees or endorsements beyond factual information."
},
{
  q: "Common Exam: Why should a guide be familiar with alternate routes?",
  a: "To adapt quickly in case of street closures, heavy crowds, or unexpected delays."
},
{
  q: "Common Exam: What is an appropriate way to handle guest questions while crossing streets?",
  a: "Pause discussion until the group has safely crossed and regrouped."
},
{
  q: "Common Exam: What is one reason guides should regularly count their guests?",
  a: "To ensure no one is separated from the group during movement."
},
{
  q: "Common Exam: How should a guide respond if a guest wants to leave the tour early?",
  a: "Provide clear directions or information and ensure the guest departs safely."
},
{
  q: "Common Exam: Why is situational awareness important for a tour guide?",
  a: "To anticipate safety concerns, manage crowds, and adjust commentary as needed."
},
{
  q: "Common Exam: What should a guide do if emergency vehicles need to pass near the group?",
  a: "Move the group to a safe location and avoid obstructing emergency access."
},
{
  q: "Common Exam: Why should a guide avoid giving legal, medical, or financial advice?",
  a: "Because it is outside the guide’s professional role and may create liability."
},
{
  q: "Common Exam: Why should a tour guide be aware of accessibility concerns along a route?",
  a: "To ensure the tour can safely accommodate guests with mobility or special needs."
},
{
  q: "Common Exam: What is an appropriate action if weather conditions worsen during a tour?",
  a: "Adjust the pace or route, seek sheltered areas if needed, and keep guests informed."
},
{
  q: "Common Exam: Why is it important for a guide to speak clearly and at an appropriate volume?",
  a: "So guests can hear instructions without disturbing nearby residents or businesses."
},
{
  q: "Common Exam: What should a guide do if a guest requests information that is clearly incorrect?",
  a: "Politely clarify the facts without dismissing the guest’s question."
},
{
  q: "Common Exam: Why should a guide avoid making promises about access or wait times?",
  a: "Because conditions can change and guarantees may lead to guest dissatisfaction."
},
{
  q: "Common Exam: What is one reason a guide should arrive early to the meeting point?",
  a: "To prepare, handle questions, and ensure the tour begins smoothly and on time."
},
{
  q: "Common Exam: How should a guide manage guest expectations at the start of a tour?",
  a: "By clearly explaining the route, duration, pacing, and any known limitations."
},
{
  q: "Common Exam: Why is it important for a guide to know the historical context of landmarks?",
  a: "So information shared is accurate, meaningful, and engaging for visitors."
},
{
  q: "Common Exam: What should a guide do if a guest becomes disruptive to the group?",
  a: "Address the behavior calmly, prioritize group safety, and maintain a professional tone."
},
{
  q: "Common Exam: Why should a guide continuously observe the group during the tour?",
  a: "To ensure safety, cohesion, and engagement throughout the experience."
},
{
  q: "Common Exam: What should a tour guide do if approached by a city official questioning the tour?",
  a: "Cooperate respectfully, follow instructions, and present a valid NYC tour guide license if requested."
},
{
  q: "Common Exam: Why should a guide understand the difference between public and private space?",
  a: "Because access rules, speech, and group behavior differ between public property and private property."
},
{
  q: "Common Exam: What is one reason a tour guide should avoid soliciting tips aggressively?",
  a: "Because it is unprofessional and may violate company policies or city expectations."
},
{
  q: "Common Exam: What should a guide do if a guest files a complaint during the tour?",
  a: "Listen calmly, acknowledge the concern, and address it professionally without disrupting the group."
},
{
  q: "Common Exam: Why should a guide avoid entering private businesses with a large group without permission?",
  a: "Because it may disrupt operations and violate property rules."
},
{
  q: "Common Exam: What is an appropriate response if police or emergency services restrict access to an area?",
  a: "Immediately comply, reroute the group, and continue the tour safely."
},
{
  q: "Common Exam: Why is it important for a guide to avoid sharing unverified stories or myths?",
  a: "Because the exam and professional standards require factual and accurate information."
},
{
  q: "Common Exam: What should a guide do if a guest asks about controversial or sensitive historical topics?",
  a: "Present balanced, factual information without personal bias or opinion."
},
{
  q: "Common Exam: Why should a guide be aware of city noise rules and ordinances?",
  a: "To avoid violations and ensure respectful interaction with the surrounding community."
},
{
  q: "Common Exam: What is one professional reason a guide should remain calm during unexpected situations?",
  a: "Because guests look to the guide for leadership, reassurance, and clear direction."
},
{
  q: "Common Exam: Who is the current Governor of New York State?",
  a: "Kathy Hochul."
},
{
  q: "Common Exam: Who is the current Mayor of New York City?",
  a: "Eric Adams."
}





];


/**
 * ✅ LANDMARKS (3 examples)
 * Each has 3 landmark-specific questions.
 * The app will display:
 *   (landmark examQA) + (COMMON_EXAM_QA)
 */
const LANDMARKS = [
  {
    id: "gct",
    name: "Grand Central Terminal",
    address: "89 E 42nd St, New York, NY 10017",
    group: "Midtown",
    neighborhood: "East Midtown",
    keywords: ["train", "metro-north", "terminal", "42nd", "lexington"],
    quickFacts: [
      "Opened in 1913; major commuter rail terminal (Metro-North).",
      "Main Concourse is famous for the constellation ceiling mural.",
      "The Whispering Gallery is near the Oyster Bar arches."
    ],
    examQA: [
      {
        q: "Exam-style: What is Grand Central Terminal and why is it important?",
        a: "A major NYC rail terminal (Metro-North) and iconic Beaux-Arts landmark in Midtown, known for its Main Concourse architecture and historic role connecting NYC to the Hudson Valley/Connecticut region."
      },
      {
        q: "Exam-style: What year did Grand Central Terminal open?",
        a: "1913."
      },
      {
        q: "Exam-style: Name one famous feature inside Grand Central that tourists ask about.",
        a: "Examples: the Main Concourse constellation ceiling or the Whispering Gallery."
      }
    ]
  },
  {
    id: "chelsea_market",
    name: "Chelsea Market",
    address: "75 9th Ave, New York, NY 10011",
    group: "Midtown",
    neighborhood: "Chelsea",
    keywords: ["food hall", "high line", "9th ave", "meatpacking"],
    quickFacts: [
      "Popular food hall and shopping space in Chelsea/Meatpacking area.",
      "Excellent stop paired with the High Line for walking tours.",
      "Great indoor option during rain/cold."
    ],
    examQA: [
      {
        q: "Exam-style: Where is Chelsea Market located and what is it known for?",
        a: "It’s on 9th Avenue in Chelsea (near the High Line) and is known as a major food hall and shopping destination."
      },
      {
        q: "Exam-style: What nearby attraction is commonly paired with Chelsea Market on a walking route?",
        a: "The High Line."
      },
      {
        q: "Exam-style: Give one practical tour-guide reason to include Chelsea Market.",
        a: "It offers restrooms/food, works as a weather break, and keeps groups engaged with an easy nearby route."
      }
    ]
  },
{
  id: "bryant_park",
  name: "Bryant Park",
  address: "Bryant Park, New York, NY 10018 (between 40th–42nd St & 5th–6th Ave)",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["bryant park", "42nd", "5th avenue", "6th avenue", "nypl", "winter village"],
  quickFacts: [
    "A major public park behind the New York Public Library (Main Branch).",
    "Known for seasonal events, seating areas, and winter activities (popular tourist stop).",
    "Excellent tour stop for group flow: open space, easy meeting point, nearby landmarks."
  ],
  examQA: [
    {
      q: "Exam-style: Where is Bryant Park located (streets/avenues) and what is it known for?",
      a: "It’s in Midtown Manhattan between 40th–42nd Streets and 5th–6th Avenues, known as a major public park and popular visitor stop near the NYPL."
    },
    {
      q: "Exam-style: What major landmark is directly next to Bryant Park?",
      a: "The New York Public Library (Stephen A. Schwarzman Building / Main Branch)."
    },
    {
      q: "Exam-style: Give one practical tour-guide reason to stop at Bryant Park.",
      a: "It’s a spacious, easy-to-navigate meeting point for groups with nearby attractions, seating, and seasonal activities."
    }
  ]
},
{
  id: "nypl_main",
  name: "New York Public Library (Stephen A. Schwarzman Building)",
  address: "476 5th Ave, New York, NY 10018",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["nypl", "public library", "5th ave", "42nd", "bryant park", "library lions"],
  quickFacts: [
    "Iconic NYC library building on Fifth Avenue near 42nd Street.",
    "Famous exterior includes the stone lions (Patience and Fortitude).",
    "A common tour stop paired with Bryant Park for quick history + photos."
  ],
  examQA: [
    {
      q: "Exam-style: Where is the New York Public Library main building located?",
      a: "On Fifth Avenue in Midtown Manhattan, near 42nd Street, next to Bryant Park."
    },
    {
      q: "Exam-style: Name a famous feature outside the NYPL main building that tourists ask about.",
      a: "The two stone lion statues (often referred to as Patience and Fortitude)."
    },
    {
      q: "Exam-style: Why is the NYPL main building significant for tours?",
      a: "It’s a major cultural institution and iconic NYC architecture, centrally located near other Midtown landmarks."
    }
  ]
},
{
  id: "chrysler_building",
  name: "Chrysler Building",
  address: "405 Lexington Ave, New York, NY 10174",
  group: "Midtown",
  neighborhood: "East Midtown",
  keywords: ["chrysler building", "art deco", "lexington", "42nd", "skyscraper"],
  quickFacts: [
    "Completed in 1930; one of NYC’s most famous Art Deco skyscrapers.",
    "Known for its stainless-steel crown/spire and classic skyline appearance.",
    "Best explained from street level as a photo stop; interior access may vary."
  ],
  examQA: [
    {
      q: "Exam-style: What architectural style is the Chrysler Building known for?",
      a: "Art Deco."
    },
    {
      q: "Exam-style: What makes the Chrysler Building visually famous?",
      a: "Its stainless-steel crown/spire and iconic Art Deco design details."
    },
    {
      q: "Exam-style: In what general Midtown area is the Chrysler Building located?",
      a: "East Midtown, near Grand Central / 42nd Street area."
    }
  ]
},
{
  id: "washington_square_park",
  name: "Washington Square Park",
  address: "Washington Square, New York, NY 10012",
  group: "Downtown",
  neighborhood: "East Village",
  keywords: ["washington square park", "greenwich village", "arch", "nyu", "downtown park"],
  quickFacts: [
    "Major Downtown park near NYU and the Village area.",
    "Known for the Washington Square Arch and strong street culture (music, chess, crowds).",
    "Great place to discuss neighborhood identity, culture, and managing group flow."
  ],
  examQA: [
    {
      q: "Exam-style: What is Washington Square Park known for?",
      a: "Its large public plaza/park setting, the Washington Square Arch, and lively street culture near NYU."
    },
    {
      q: "Exam-style: What is one common crowd-management tip for guiding groups here?",
      a: "Use a clear meeting point, avoid blocking pathways, and keep the group together due to heavy foot traffic."
    },
    {
      q: "Exam-style: Name one nearby institution commonly associated with Washington Square Park.",
      a: "New York University (NYU)."
    }
  ]
},
{
  id: "911_memorial",
  name: "National September 11 Memorial (9/11 Memorial)",
  address: "180 Greenwich St, New York, NY 10007",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["9/11 memorial", "world trade center", "ground zero", "one world trade", "fidi"],
  quickFacts: [
    "Memorial plaza at the World Trade Center site in Lower Manhattan.",
    "Features two reflecting pools in the footprints of the Twin Towers with names inscribed.",
    "A high-emotion stop: guides should keep tone respectful and allow time for reflection."
  ],
  examQA: [
    {
      q: "Exam-style: Where is the 9/11 Memorial located?",
      a: "At the World Trade Center site in Lower Manhattan (Financial District area)."
    },
    {
      q: "Exam-style: What are the two main design features visitors notice at the 9/11 Memorial?",
      a: "The two reflecting pools in the footprints of the Twin Towers and the inscribed names of victims."
    },
    {
      q: "Exam-style: What is one guiding best-practice when bringing a group here?",
      a: "Maintain a respectful tone, avoid loud commentary, and give visitors time/space to reflect."
    }
  ]
},
{
  id: "empire_state",
  name: "Empire State Building",
  address: "20 W 34th St, New York, NY 10001",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["empire state", "34th street", "5th avenue", "observatory", "skyscraper"],
  quickFacts: [
    "Iconic NYC skyscraper with observatories and skyline views.",
    "Located in Midtown near 34th Street; major tourist photo and orientation point.",
    "Often used to discuss NYC skyscraper history and Midtown geography."
  ],
  examQA: [
    {
      q: "Exam-style: Where is the Empire State Building located?",
      a: "In Midtown Manhattan on West 34th Street near Fifth Avenue."
    },
    {
      q: "Exam-style: Why is the Empire State Building significant for visitors?",
      a: "It’s one of NYC’s most famous skyscrapers and a major observation/deck attraction with skyline views."
    },
    {
      q: "Exam-style: Give one practical tour-guide tip when stopping near the Empire State Building.",
      a: "Expect heavy crowds and keep the group to the side so sidewalks and building entrances stay clear."
    }
  ]
},
{
  id: "madison_square_garden",
  name: "Madison Square Garden (MSG)",
  address: "4 Pennsylvania Plaza, New York, NY 10001",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["msg", "madison square garden", "penn station", "arena", "events"],
  quickFacts: [
    "Major sports and concert arena located above Penn Station.",
    "A key orientation point for Midtown West and transit connections.",
    "Useful for explaining how transit hubs connect to major venues."
  ],
  examQA: [
    {
      q: "Exam-style: What is Madison Square Garden and where is it located?",
      a: "A major sports and entertainment arena located at Penn Plaza above/near Penn Station in Midtown Manhattan."
    },
    {
      q: "Exam-style: What major transit hub is directly connected to MSG?",
      a: "Penn Station."
    },
    {
      q: "Exam-style: Why is MSG an important stop or reference point on tours?",
      a: "It’s a famous venue and a major navigation landmark near transit, hotels, and Midtown West attractions."
    }
  ]
},
{
  id: "penn_station",
  name: "Penn Station (New York Penn Station)",
  address: "Pennsylvania Station, New York, NY 10001",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["penn station", "amtrak", "nj transit", "lirr", "midtown west"],
  quickFacts: [
    "Major rail hub serving Amtrak, NJ Transit, and the LIRR.",
    "Central for explaining regional access to Manhattan (NJ, Long Island, DC/Boston corridor).",
    "High traffic area; good for safety and group-control practice."
  ],
  examQA: [
    {
      q: "Exam-style: What services operate through Penn Station?",
      a: "Amtrak, NJ Transit, and the Long Island Rail Road (LIRR)."
    },
    {
      q: "Exam-style: Why is Penn Station important in NYC geography?",
      a: "It’s one of NYC’s main rail gateways and a key Midtown transit hub for regional travel."
    },
    {
      q: "Exam-style: What is one group-management tip when guiding near Penn Station?",
      a: "Choose a clear meeting point and keep the group close due to heavy foot traffic and congestion."
    }
  ]
},
{
  id: "rockefeller_center",
  name: "Rockefeller Center",
  address: "45 Rockefeller Plaza, New York, NY 10111",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["rockefeller center", "top of the rock", "radio city", "5th avenue", "christmas tree"],
  quickFacts: [
    "Famous Midtown complex known for seasonal events and major attractions.",
    "Home area for Top of the Rock and close to Radio City Music Hall.",
    "Popular for holiday tourism and Midtown walking routes."
  ],
  examQA: [
    {
      q: "Exam-style: What is Rockefeller Center known for?",
      a: "A major Midtown complex known for attractions like Top of the Rock and seasonal holiday tourism."
    },
    {
      q: "Exam-style: Name one major nearby attraction associated with Rockefeller Center.",
      a: "Examples: Top of the Rock observation deck or Radio City Music Hall."
    },
    {
      q: "Exam-style: Why is Rockefeller Center a practical tour stop?",
      a: "It’s centrally located, highly recognizable, and connects easily to other Midtown landmarks."
    }
  ]
},
{
  id: "st_patricks_cathedral",
  name: "St. Patrick’s Cathedral",
  address: "5th Ave, New York, NY 10022 (at E 50th St)",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["st patrick's cathedral", "5th avenue", "50th street", "cathedral", "rockefeller"],
  quickFacts: [
    "Major cathedral on Fifth Avenue near Rockefeller Center.",
    "Common stop for architecture + cultural significance along 5th Ave routes.",
    "Guides should maintain respectful tone and be aware of services."
  ],
  examQA: [
    {
      q: "Exam-style: Where is St. Patrick’s Cathedral located?",
      a: "On Fifth Avenue at around 50th Street in Midtown Manhattan, near Rockefeller Center."
    },
    {
      q: "Exam-style: Why is St. Patrick’s Cathedral a common stop on Fifth Avenue tours?",
      a: "It’s a major religious and architectural landmark in a prime Midtown location."
    },
    {
      q: "Exam-style: What is one best-practice tip when guiding visitors here?",
      a: "Be respectful of worship/services and keep voices low inside or near entrances."
    }
  ]
},
{
  id: "high_line",
  name: "The High Line",
  address: "High Line entrance varies (Chelsea/Meatpacking), New York, NY",
  group: "Midtown",
  neighborhood: "Chelsea",
  keywords: ["high line", "elevated park", "chelsea", "meatpacking", "hudson yards"],
  quickFacts: [
    "Elevated linear park built on a former rail line on Manhattan’s West Side.",
    "Popular walking route connecting Chelsea/Meatpacking toward Hudson Yards area.",
    "Great for tours due to views, easy walking flow, and nearby food stops."
  ],
  examQA: [
    {
      q: "Exam-style: What is the High Line and why is it popular?",
      a: "An elevated park on Manhattan’s West Side, popular for walking routes, views, and nearby attractions."
    },
    {
      q: "Exam-style: What neighborhood is strongly associated with the High Line?",
      a: "Chelsea (and nearby Meatpacking/Hudson Yards area)."
    },
    {
      q: "Exam-style: Name one practical reason guides like using the High Line in routes.",
      a: "It provides an easy, scenic walking corridor with predictable flow and nearby stops for breaks."
    }
  ]
},
{
  id: "flatiron_building",
  name: "Flatiron Building",
  address: "175 5th Ave, New York, NY 10010",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["flatiron", "5th avenue", "23rd street", "madison square", "triangle building"],
  quickFacts: [
    "Famous triangular building near 23rd Street where Broadway and Fifth Avenue meet.",
    "A classic photo landmark and a good point to explain street layout.",
    "Often paired with Madison Square Park area context."
  ],
  examQA: [
    {
      q: "Exam-style: What makes the Flatiron Building easy to recognize?",
      a: "Its distinctive triangular shape where Broadway and Fifth Avenue meet near 23rd Street."
    },
    {
      q: "Exam-style: Where is the Flatiron Building located (general area)?",
      a: "Near 23rd Street in Manhattan, where Broadway and Fifth Avenue intersect."
    },
    {
      q: "Exam-style: Why is the Flatiron Building useful for guiding and orientation?",
      a: "It’s a strong visual landmark and helps explain the street grid vs Broadway’s diagonal route."
    }
  ]
},
{
  id: "federal_hall",
  name: "Federal Hall",
  address: "26 Wall St, New York, NY 10005",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["federal hall", "wall street", "historic", "george washington", "nyse"],
  quickFacts: [
    "Historic government-related landmark on Wall Street, near the NYSE.",
    "Common cluster stop for U.S. history themes in the Financial District.",
    "Great place to connect early American history to NYC’s role in finance/government."
  ],
  examQA: [
    {
      q: "Exam-style: Where is Federal Hall located?",
      a: "On Wall Street in the Financial District, near the New York Stock Exchange."
    },
    {
      q: "Exam-style: Why is Federal Hall important in NYC history tours?",
      a: "It’s a key historic site tied to early U.S. government history and is located in a major civic/financial area."
    },
    {
      q: "Exam-style: Name one nearby landmark you can point out from Federal Hall.",
      a: "Examples: the NYSE, Wall Street, or Trinity Church (a short walk)."
    }
  ]
},
{
  id: "trinity_church",
  name: "Trinity Church (Wall Street)",
  address: "89 Broadway, New York, NY 10006",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["trinity church", "wall street", "broadway", "church", "cemetery"],
  quickFacts: [
    "Historic church near Wall Street and Broadway in the Financial District.",
    "A well-known contrast stop: historic religious site surrounded by finance district towers.",
    "Useful for explaining early NYC history and neighborhood development."
  ],
  examQA: [
    {
      q: "Exam-style: Where is Trinity Church located?",
      a: "Near Wall Street at Broadway in the Financial District (Lower Manhattan)."
    },
    {
      q: "Exam-style: Why is Trinity Church a common stop on Financial District walking tours?",
      a: "It’s a historic landmark and a strong visual contrast to the surrounding financial district skyscrapers."
    },
    {
      q: "Exam-style: Give one tour-guide best practice when stopping at Trinity Church.",
      a: "Be respectful, avoid blocking entrances, and keep groups organized due to busy sidewalks."
    }
  ]
},
{
  id: "stonewall_inn",
  name: "Stonewall Inn",
  address: "53 Christopher St, New York, NY 10014",
  group: "Downtown",
  neighborhood: "East Village",
  keywords: ["stonewall", "christopher street", "greenwich village", "history", "lgbtq"],
  quickFacts: [
    "Historic landmark associated with major civil rights history in NYC.",
    "A commonly referenced site in Downtown/Village area history discussions.",
    "Best approached with respectful tone and clear historical context."
  ],
  examQA: [
    {
      q: "Exam-style: Where is the Stonewall Inn located?",
      a: "On Christopher Street in the Village area of Downtown Manhattan."
    },
    {
      q: "Exam-style: Why is the Stonewall Inn historically significant?",
      a: "It is widely recognized as an important site in civil rights history in New York City."
    },
    {
      q: "Exam-style: What is a best-practice guiding approach when discussing this site?",
      a: "Use respectful language, provide accurate context, and keep the group attentive without being disruptive."
    }
  ]
},

  {
    id: "nyse",
    name: "New York Stock Exchange (NYSE)",
    address: "11 Wall St, New York, NY 10005",
    group: "Downtown",
    neighborhood: "Financial District",
    keywords: ["wall street", "finance", "fidi", "federal hall", "trinity church"],
    quickFacts: [
      "Major global stock exchange located on Wall Street in the Financial District.",
      "Close to Federal Hall and Trinity Church—excellent cluster for a FiDi tour.",
      "Exterior viewing is typical; security is tight around the building."
    ],
    examQA: [
      {
        q: "Exam-style: Where is the NYSE located and what is its significance?",
        a: "It’s at 11 Wall Street in the Financial District and is a central institution in U.S. and global finance."
      },
      {
        q: "Exam-style: Name two nearby FiDi landmarks you can point out from the NYSE area.",
        a: "Examples: Federal Hall, Trinity Church, Wall Street, Charging Bull (nearby), or the Oculus (a short walk)."
      },
      {
        q: "Exam-style: What’s a good safety/flow tip when guiding groups near Wall Street?",
        a: "Keep the group to the side (not blocking sidewalks/entrances), avoid restricted areas, and expect heavy security presence."
      }
    ]
  },
{
  id: "times_square",
  name: "Times Square",
  address: "Times Square, New York, NY 10036",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["times square", "broadway", "theater district", "42nd street", "tourists"],
  quickFacts: [
    "Major commercial and entertainment hub in Midtown Manhattan.",
    "Known for bright billboards, Broadway theaters, and heavy pedestrian traffic.",
    "Requires strong crowd-control and clear meeting points."
  ],
  examQA: [
    {
      q: "Exam-style: What is Times Square known for?",
      a: "It is known for its bright electronic billboards, Broadway theaters, and as a major tourist destination."
    },
    {
      q: "Exam-style: Why is group management important in Times Square?",
      a: "Because of heavy crowds, traffic flow, and constant pedestrian movement."
    },
    {
      q: "Exam-style: What is a good guiding strategy when stopping here?",
      a: "Use a clear meeting point and keep explanations brief to avoid blocking foot traffic."
    }
  ]
},
{
  id: "radio_city",
  name: "Radio City Music Hall",
  address: "1260 6th Ave, New York, NY 10020",
  group: "Midtown",
  neighborhood: "Midtown",
  keywords: ["radio city", "music hall", "rockefeller", "concert venue"],
  quickFacts: [
    "Historic entertainment venue near Rockefeller Center.",
    "Famous for the Rockettes and Art Deco interior.",
    "Often paired with Rockefeller Center tours."
  ],
  examQA: [
    {
      q: "Exam-style: What is Radio City Music Hall known for?",
      a: "A historic entertainment venue famous for concerts, shows, and the Rockettes."
    },
    {
      q: "Exam-style: Where is Radio City Music Hall located?",
      a: "Near Rockefeller Center in Midtown Manhattan."
    },
    {
      q: "Exam-style: Why is it a practical stop on Midtown tours?",
      a: "It is centrally located and closely connected to other major attractions."
    }
  ]
},
{
  id: "one_world_trade",
  name: "One World Trade Center",
  address: "285 Fulton St, New York, NY 10007",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["one world trade", "freedom tower", "wtc", "observatory"],
  quickFacts: [
    "Tallest building in the Western Hemisphere.",
    "Symbol of rebuilding and resilience after 9/11.",
    "Often referenced alongside the 9/11 Memorial."
  ],
  examQA: [
    {
      q: "Exam-style: What is One World Trade Center?",
      a: "A major skyscraper and symbol of rebuilding at the World Trade Center site."
    },
    {
      q: "Exam-style: Why is it historically significant?",
      a: "It represents resilience and redevelopment after the events of September 11, 2001."
    },
    {
      q: "Exam-style: What nearby site is commonly discussed together with it?",
      a: "The 9/11 Memorial."
    }
  ]
},
{
  id: "battery_park",
  name: "The Battery (Battery Park)",
  address: "Battery Park, New York, NY 10004",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["battery park", "statue of liberty", "ellis island", "harbor"],
  quickFacts: [
    "Waterfront park at the southern tip of Manhattan.",
    "Departure point for Statue of Liberty and Ellis Island ferries.",
    "Good orientation point for NYC harbor geography."
  ],
  examQA: [
    {
      q: "Exam-style: What is Battery Park commonly used for?",
      a: "Access to Statue of Liberty and Ellis Island ferries."
    },
    {
      q: "Exam-style: Why is Battery Park useful on Downtown tours?",
      a: "It provides open space, harbor views, and geographic orientation."
    },
    {
      q: "Exam-style: What crowd-management issue should guides expect?",
      a: "Long ferry lines and heavy tourist congestion."
    }
  ]
},
{
  id: "statue_liberty",
  name: "Statue of Liberty (Viewpoint)",
  address: "Liberty Island, New York Harbor",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["statue of liberty", "liberty island", "harbor view"],
  quickFacts: [
    "Iconic national monument located on Liberty Island.",
    "Often viewed from Battery Park during walking tours.",
    "Symbol of freedom and immigration."
  ],
  examQA: [
    {
      q: "Exam-style: Where is the Statue of Liberty located?",
      a: "On Liberty Island in New York Harbor."
    },
    {
      q: "Exam-style: From where do most tours view or access the statue?",
      a: "From Battery Park in Lower Manhattan."
    },
    {
      q: "Exam-style: Why is it commonly discussed even when not visited?",
      a: "Because it is one of the most recognizable symbols of the United States."
    }
  ]
},
{
  id: "wall_street",
  name: "Wall Street",
  address: "Wall Street, New York, NY 10005",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["wall street", "finance", "nyse", "fidi"],
  quickFacts: [
    "Historic street at the heart of the Financial District.",
    "Associated with global finance and economic institutions.",
    "High-security and high-traffic area."
  ],
  examQA: [
    {
      q: "Exam-style: What is Wall Street associated with?",
      a: "Global finance and major financial institutions."
    },
    {
      q: "Exam-style: Why should guides be cautious when stopping here?",
      a: "Due to security concerns and heavy pedestrian traffic."
    },
    {
      q: "Exam-style: Name one landmark commonly discussed here.",
      a: "The New York Stock Exchange."
    }
  ]
},
{
  id: "city_hall_park",
  name: "City Hall Park",
  address: "City Hall Park, New York, NY 10007",
  group: "Downtown",
  neighborhood: "Financial District",
  keywords: ["city hall", "government", "park", "courthouse"],
  quickFacts: [
    "Public park surrounding New York City Hall.",
    "Useful stop for discussing NYC government and civic history.",
    "Open space near courthouses and civic buildings."
  ],
  examQA: [
    {
      q: "Exam-style: What is City Hall Park used for?",
      a: "Public space near NYC government buildings."
    },
    {
      q: "Exam-style: Why is it useful on walking tours?",
      a: "It offers open space and civic context."
    },
    {
      q: "Exam-style: What should guides be mindful of here?",
      a: "Security and active government operations nearby."
    }
  ]
},
{
  id: "soho",
  name: "SoHo Cast-Iron Historic District",
  address: "SoHo, New York, NY 10012",
  group: "Downtown",
  neighborhood: "East Village",
  keywords: ["soho", "cast iron", "shopping", "historic district"],
  quickFacts: [
    "Known for cast-iron buildings and shopping streets.",
    "Popular neighborhood for architecture and retail.",
    "Busy sidewalks require careful group control."
  ],
  examQA: [
    {
      q: "Exam-style: What is SoHo known for?",
      a: "Cast-iron architecture and shopping streets."
    },
    {
      q: "Exam-style: Why is SoHo popular with visitors?",
      a: "Its historic architecture and retail scene."
    },
    {
      q: "Exam-style: What is a guiding challenge in SoHo?",
      a: "Narrow sidewalks and heavy foot traffic."
    }
  ]
},
{
  id: "little_italy",
  name: "Little Italy",
  address: "Mulberry St, New York, NY 10013",
  group: "Downtown",
  neighborhood: "East Village",
  keywords: ["little italy", "mulberry street", "italian heritage"],
  quickFacts: [
    "Historic neighborhood known for Italian-American heritage.",
    "Common stop for food and cultural discussions.",
    "Often paired with Chinatown tours."
  ],
  examQA: [
    {
      q: "Exam-style: What is Little Italy known for?",
      a: "Italian-American history, restaurants, and cultural heritage."
    },
    {
      q: "Exam-style: What nearby neighborhood is often paired with it?",
      a: "Chinatown."
    },
    {
      q: "Exam-style: What guiding tip applies here?",
      a: "Avoid blocking narrow sidewalks and restaurant entrances."
    }
  ]
},
{
  id: "chinatown",
  name: "Chinatown",
  address: "Chinatown, New York, NY 10013",
  group: "Downtown",
  neighborhood: "East Village",
  keywords: ["chinatown", "culture", "food", "downtown"],
  quickFacts: [
    "One of the largest Chinatown neighborhoods in the U.S.",
    "Known for food, markets, and cultural landmarks.",
    "High pedestrian density requires strong group awareness."
  ],
  examQA: [
    {
      q: "Exam-style: What is Chinatown known for?",
      a: "Cultural landmarks, food markets, and vibrant street life."
    },
    {
      q: "Exam-style: Why is Chinatown a popular tour stop?",
      a: "It offers strong cultural contrast and history."
    },
    {
      q: "Exam-style: What is an important guiding consideration here?",
      a: "Managing group size and respecting local businesses."
    }
  ]
}











];


// ---------------- Utilities ----------------
const $ = (id) => document.getElementById(id);
const qEl = $("q");
const groupEl = $("group");
const hoodEl = $("hood");
const lmListEl = $("lmList");
const rightPane = $("rightPane");
const countPill = $("countPill");
const statusEl = $("status");

function normalize(s){ return String(s ?? "").toLowerCase().trim(); }
function escapeHtml(str){
  return String(str ?? "")
    .replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;")
    .replaceAll('"',"&quot;").replaceAll("'","&#039;");
}

function fillNeighborhoods(){
  const g = groupEl.value;
  let hoods = [];
  if (g) hoods = AREA_GROUPS[g] || [];
  else hoods = Object.values(AREA_GROUPS).flat();
  hoods = Array.from(new Set(hoods)).sort((a,b)=>a.localeCompare(b));
  const current = hoodEl.value;

  hoodEl.innerHTML = `<option value="">All</option>` + hoods.map(h => `<option value="${escapeHtml(h)}">${escapeHtml(h)}</option>`).join("");
  if (hoods.includes(current)) hoodEl.value = current;
}

// ---------------- Landmark list render ----------------
let currentLandmarkId = null;

function getFilteredLandmarks(){
  const q = normalize(qEl.value);
  const g = groupEl.value;
  const h = hoodEl.value;

  return LANDMARKS.filter(lm => {
    if (g && lm.group !== g) return false;
    if (h && lm.neighborhood !== h) return false;
    if (!q) return true;

    const hay = normalize([
      lm.name, lm.address, lm.group, lm.neighborhood,
      (lm.keywords||[]).join(" "),
      (lm.quickFacts||[]).join(" "),
      (lm.examQA||[]).map(x=>x.q+" "+x.a).join(" "),
      (COMMON_EXAM_QA||[]).map(x=>x.q+" "+x.a).join(" ")
    ].join(" "));
    return hay.includes(q);
  }).sort((a,b)=>a.name.localeCompare(b.name));
}

function renderLandmarkList(){
  const items = getFilteredLandmarks();
  countPill.textContent = `${items.length} landmarks`;

  if (!items.length){
    lmListEl.innerHTML = `<div class="empty">No matches. Try a different search.</div>`;
    return;
  }

  lmListEl.innerHTML = items.map(lm => {
    const selected = lm.id === currentLandmarkId;
    const totalQs = (lm.examQA?.length || 0) + (COMMON_EXAM_QA?.length || 0);
    return `
      <button class="lmBtn" data-id="${escapeHtml(lm.id)}" style="${selected ? 'border-color: rgba(0,212,255,.55);' : ''}">
        <div>
          <div class="lmTitle">${escapeHtml(lm.name)}</div>
          <div class="lmMeta">${escapeHtml(lm.group)} → ${escapeHtml(lm.neighborhood)}<br>${escapeHtml(lm.address)}</div>
        </div>
        <span class="badge">${totalQs} Qs</span>
      </button>
    `;
  }).join("");

  lmListEl.querySelectorAll("[data-id]").forEach(btn => {
    btn.addEventListener("click", () => openLandmark(btn.dataset.id));
  });
}

// ---------------- Detail view ----------------
function openLandmark(id){
  const lm = LANDMARKS.find(x => x.id === id);
  if (!lm) return;
  currentLandmarkId = id;
  renderLandmarkList();

  const mapsQuery = encodeURIComponent(`${lm.name} ${lm.address}`);
  const mapsLink = `https://www.google.com/maps/search/?api=1&query=${mapsQuery}`;

  // Combine landmark-specific Qs + common exam Qs
  const combinedQA = [...(lm.examQA || []), ...(COMMON_EXAM_QA || [])];

  rightPane.innerHTML = `
    <div>
      <h2 class="detailTitle">${escapeHtml(lm.name)}</h2>
      <div class="detailMeta">
        <div><strong>Address:</strong> ${escapeHtml(lm.address)}</div>
        <div><strong>Area:</strong> ${escapeHtml(lm.group)} → ${escapeHtml(lm.neighborhood)}</div>
      </div>

      <div class="chips">
        <a class="chip" href="${mapsLink}" target="_blank" rel="noopener">🔎 <strong>Map</strong></a>
        <button class="chip" id="copyBtn">📋 <strong>Copy</strong></button>
      </div>

      <div class="sectionTitle">Quick Study Card</div>
      <div class="facts">
        <div class="muted">Read once, then try recalling without looking.</div>
        <ul>
          ${(lm.quickFacts||[]).map(f=>`<li>${escapeHtml(f)}</li>`).join("")}
        </ul>
      </div>

      <div class="sectionTitle">Exam-Style Questions</div>
      ${combinedQA.map((qa, idx) => `
        <div class="qCard" style="margin-top:10px">
          <div class="qRow">
            <div class="qPrompt"><strong>Q${idx+1}:</strong> ${escapeHtml(qa.q)}</div>
            <button class="primary" data-reveal="${idx}">Reveal Answer</button>
            <div class="answer" id="ans_${idx}">${escapeHtml(qa.a)}</div>
          </div>
        </div>
      `).join("")}

      <div class="sectionTitle">How to use this for the exam</div>
      <div class="facts">
        <ul>
          <li><strong>Search</strong> → pick landmark → <strong>say the answer out loud</strong> before revealing.</li>
          <li>Practice: “What is it, where is it, why it matters, 1–2 facts, what’s nearby.”</li>
        </ul>
      </div>
    </div>
  `;

  // wire buttons
  $("copyBtn").addEventListener("click", () => {
    const txt = `${lm.name} — ${lm.address}`;
    navigator.clipboard?.writeText(txt).then(() => {
      statusEl.textContent = "Copied ✅";
      setTimeout(()=>statusEl.textContent="Tip: Add this page to your phone Home Screen for quick access.", 1200);
    }).catch(()=>alert("Copy blocked by browser."));
  });

  rightPane.querySelectorAll("[data-reveal]").forEach(btn => {
    btn.addEventListener("click", () => {
      const i = btn.dataset.reveal;
      const ans = $("ans_"+i);
      const showing = ans.style.display === "block";
      ans.style.display = showing ? "none" : "block";
      btn.textContent = showing ? "Reveal Answer" : "Hide Answer";
    });
  });
}

// ---------------- Quiz mode ----------------
function buildQuizPool(filteredLandmarks){
  const pool = [];
  filteredLandmarks.forEach(lm => {
    const combinedQA = [...(lm.examQA || []), ...(COMMON_EXAM_QA || [])];
    combinedQA.forEach((qa) => {
      pool.push({
        lmId: lm.id,
        lmName: lm.name,
        group: lm.group,
        neighborhood: lm.neighborhood,
        q: qa.q,
        a: qa.a
      });
    });
  });
  return pool;
}

function showQuiz(){
  const filtered = getFilteredLandmarks();
  const pool = buildQuizPool(filtered);

  if (!pool.length){
    rightPane.innerHTML = `<div class="empty">No questions available in the current filter. Clear filters or add more Qs.</div>`;
    return;
  }

  let current = pool[Math.floor(Math.random()*pool.length)];

  rightPane.innerHTML = `
    <div>
      <h2 class="detailTitle">Quiz Mode</h2>
      <div class="detailMeta">Filtered pool: <strong>${pool.length}</strong> questions</div>

      <div class="sectionTitle">Question</div>
      <div class="qCard">
        <div class="qPrompt" id="quizQ" style="font-size:14px"><strong>${escapeHtml(current.q)}</strong></div>
        <div class="muted">Landmark: <strong>${escapeHtml(current.lmName)}</strong> (${escapeHtml(current.group)} → ${escapeHtml(current.neighborhood)})</div>

        <div class="actions">
          <button class="primary" id="revealQuiz">Reveal Answer</button>
          <button class="alt" id="nextQuiz">Next Question</button>
          <button id="openLm">Open Landmark</button>
        </div>

        <div class="answer" id="quizA">${escapeHtml(current.a)}</div>
      </div>

      <div class="sectionTitle">How to drill</div>
      <div class="facts">
        <ul>
          <li>Before tapping reveal, answer out loud in 10–15 seconds.</li>
          <li>If you miss it, tap <strong>Open Landmark</strong> and review the Quick Study Card.</li>
        </ul>
      </div>
    </div>
  `;

  function pickNew(){
    current = pool[Math.floor(Math.random()*pool.length)];
    $("quizQ").innerHTML = `<strong>${escapeHtml(current.q)}</strong>`;
    $("quizA").innerHTML = escapeHtml(current.a);
    $("quizA").style.display = "none";
    $("revealQuiz").textContent = "Reveal Answer";
  }

  $("revealQuiz").addEventListener("click", () => {
    const ans = $("quizA");
    const showing = ans.style.display === "block";
    ans.style.display = showing ? "none" : "block";
    $("revealQuiz").textContent = showing ? "Reveal Answer" : "Hide Answer";
  });
  $("nextQuiz").addEventListener("click", pickNew);
  $("openLm").addEventListener("click", () => openLandmark(current.lmId));
}

// ---------------- Controls ----------------
$("quizBtn").addEventListener("click", () => showQuiz());

$("clearBtn").addEventListener("click", () => {
  qEl.value = "";
  groupEl.value = "";
  hoodEl.value = "";
  fillNeighborhoods();
  currentLandmarkId = null;
  renderLandmarkList();
  rightPane.innerHTML = `<div class="empty">Select a landmark on the left to view study facts and exam questions.</div>`;
});

qEl.addEventListener("input", () => { renderLandmarkList(); });
groupEl.addEventListener("change", () => { fillNeighborhoods(); renderLandmarkList(); });
hoodEl.addEventListener("change", () => { renderLandmarkList(); });

// init
fillNeighborhoods();
renderLandmarkList();
</script>
</body>
</html>
